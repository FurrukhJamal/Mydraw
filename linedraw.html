<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Draw</title>
        <style media="screen">
            .header h1
            {
                text-align:center;
                margin-bottom: 0px;
                margin-top: 0px;
            }
            #options
            {
                width: 26%;
                margin-left: 20px;
            }
            #options select{
                width: 25%;
                height: 30px;
            }
            #options button {
                height: 30px;
            }
        </style>
        <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    </head>
    <body>
        <div class="header">
            <h1>Draw</h1>
            <div id = "options">
                <select id ="color">
                    <option value="black">Black</option>
                    <option value="red">Red</option>
                    <option value="blue" selected = "selected">Blue</option>
                </select>
                <select  name="size">
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
                <button type="button" name="Erase">Erase</button>
            </div>

        </div>
        <svg id = "svg" style = "width:100%;height:800px;">

        </svg>
    </body>
    <script type="text/javascript">
        const svg = d3.select("#svg");
        let drawing = false;

        //to store coordinates for each time mouse moves
        let data =[];

        //to get the color selected from the options
        let colorOptions = document.getElementById("color");

        //get the initial selected color
        let color = colorOptions.options[colorOptions.selectedIndex].value;

        // getting the selected color when another choice is made
        colorOptions.onchange = ()=> {
            color = colorOptions.options[colorOptions.selectedIndex].value;
            console.log(color);
        }



        function drawPoint()
        {
            if(!drawing)
                return;
            const cords = d3.mouse(this);
            //console.log("The coords are" + cords)
            data.push(cords);
            //console.log(data);

            //loop through the coordinates
            for(let i = 0; i < data.length - 1; i++)
            {

                console.log("inside condition");
                //means a vertical line is been made
                svg.append("line")
                    .attr("x1", data[i][0])     // x position of the first end of the line
                    .attr("y1", data[i][1])      // y position of the first end of the line
                    .attr("x2", data[i + 1][0])     // x position of the second end of the line
                    .attr("y2", data[i +1][1])      // y position of the second end of the line
                    .attr('stroke-width', 5)
                    .style("stroke", color);

            }
        }

        svg.on("mousemove", drawPoint);


        //});

        svg.on("mousedown", () => {
            drawing = true;
        });

        svg.on("mouseup", () => {
            drawing = false;
            data = [];
        });
    </script>
</html>
